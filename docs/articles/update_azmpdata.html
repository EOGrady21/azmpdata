<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>update_azmpdata • azmpdata</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="update_azmpdata">
<meta property="og:description" content="azmpdata">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">azmpdata</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2019.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/plotting_azmpdata.html">Plotting in azmpdata</a>
    </li>
    <li>
      <a href="../articles/search_azmpdata.html">azmpdata - searching</a>
    </li>
    <li>
      <a href="../articles/style_guide.html">Style Guide</a>
    </li>
    <li>
      <a href="../articles/update_azmpdata.html">update_azmpdata</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/casaultb/azmpdata/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="update_azmpdata_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>update_azmpdata</h1>
                        <h4 class="author">Emily Chisholm</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/casaultb/azmpdata/blob/master/vignettes/update_azmpdata.Rmd"><code>vignettes/update_azmpdata.Rmd</code></a></small>
      <div class="hidden name"><code>update_azmpdata.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">azmpdata</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt;  casaultb/azmpdata status:</span>
<span class="co">#&gt;  (Package ver: 0.2019.0.9000) Up to date</span>
<span class="co">#&gt;  (Data ver: 2021-01-05 ) Push to Github</span></pre></body></html></div>
<p>This package should be updated on an annual basis or whenever there are major changes made to the data set. The update process should only be undertaken by developers or data managers. The following document describes the procedure for updating the data package</p>
<div id="step-1" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1" class="anchor"></a>Step 1</h3>
<p><strong>Add new raw data files</strong></p>
<p>For physical data: Raw data files (in either .dat or .csv) can be added to <code>inst/extdata</code>. It is best if this folder is kept organized by variable, for example the <code>inst/extdata/airTemperature</code> folder contains all the raw airTemperature data. It is important that the raw data format be identical to the previously used formats for that specific variable. The format does vary between variables but should be kept the same between years within a variable. If you are unsure of the correct format, please open an existing data file and review the format before uploading new raw data!</p>
<p>For biological data: Raw data files are uploaded to the FTP server at ‘<a href="ftp://ftp.dfo-mpo.gc.ca/AZMP_Maritimes/AZMP_Reporting/outputs" class="uri">ftp://ftp.dfo-mpo.gc.ca/AZMP_Maritimes/AZMP_Reporting/outputs</a>’. The formatting of these data files is important and should be maintained between years.</p>
<p>For more details on the formatting of data, please see the <code>style_guide</code> vignette.</p>
</div>
<div id="step-2" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2" class="anchor"></a>Step 2</h3>
<p><strong>Pre- process raw data into R format</strong></p>
<p>Once raw physical data has been added to the appropriate folder the user should run the .R script associated with the raw data. For most variables these files are included within the data folder (eg. <code>inst/extdata/airTemperature/airTemperature.R</code>). This script performs two functions, 1) it reads in all the raw data and formats it into a consistent .rda file in <code>data-raw</code>, 2) for variables where the raw files are in .dat format it creates a .csv format file. This script can be run by opening it or by using code similar to the example below (replacing the file name as necessary).</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/source.html">source</a></span>(<span class="st">'inst/extdata/airTemperature/airTemperature.R'</span>)</pre></body></html></div>
<p>Biological data is loaded into the package using individual scripts for each dataframe. These scripts are contained in <code>inst/extdata</code> and organized by folder depending on the data type. These scripts output package data objects but <strong>note that after running these scripts the package data will only contain biological data and must be completed with the physical data by completeing the next steps</strong>.</p>
</div>
<div id="step-3" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3" class="anchor"></a>Step 3</h3>
<p><strong>Combine rda files into final package form</strong></p>
<p>Once physical data has been formatted into .rda files (contained in <code>data-raw</code> in the main package directory), it is ready to be combined into the final package data tables (which have been created with the biological data in the previous step). This can be done be running the function <code><a href="../reference/combine_all_data.html">combine_all_data()</a></code>. This function requires no arguments and results in final .rda files being saved in <code>data</code>. This function should be used with caution. Please ensure that you have followed the above steps in order and that the <code>data-raw</code> folder has been updated before running <code><a href="../reference/combine_all_data.html">combine_all_data()</a></code>. The output from this function is visible in the main package directory in <code>data</code> as .rda files organized into data tables by temporal, spatial and categorical scales. This function should also update the date stamp in <code>inst/extdata/datadate.txt</code> to reflect the current date when the package data was updated. This datestamp should be in the format YYYY-MM-DD.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r">
<span class="fu"><a href="../reference/combine_all_data.html">combine_all_data</a></span>()</pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
